'use strict';$(function(){function a(a){var b=$("#"+a).attr("data-id");$("#theme-title").html(b)}function b(){let a=document.querySelector("#usecase-category"),b=document.querySelector("#usecase-template");a.setCustomValidity(""),b.setCustomValidity(""),$("#usecase-category").siblings(".error").remove(),$("#usecase-template").siblings(".error").remove()}function c(a){var b=$.Deferred();return $.ajax({url:SITE_URL+"/package/get-info/"+a,type:"get",success:function(a){b.resolve(a)}}),b.promise()}function d(a){a&&$("#renewable").val(a.renewable)}function e(a){a&&($("#billing_price, #amount_billed").val(0<a.discount_price?a.discount_price:a.sale_price),$("#billing_cycle").val(a.billing_cycle),"Paid"==$("#payment_status").val()?($("#amount_received").val(0<a.discount_price?a.discount_price:a.sale_price),$("#amount_due").val(0)):($("#amount_due").val(0<a.discount_price?a.discount_price:a.sale_price),$("#amount_received").val(0)),"days"==a.billing_cycle?($("#duration_days").removeClass("d-none"),$("#duration").val(a.duration).attr("readonly",!0)):($("#duration_days").addClass("d-none"),$("#duration").val("").attr("readonly",!0)))}function f(a){var b=1;b="days"==a.billing_cycle?a.duration:i[a.billing_cycle],($("#subscription-add-container").length||$("#subscription-edit-container").length)&&$("input[name=\"next_billing_date\"]").daterangepicker({singleDatePicker:!0,showDropdowns:!0,startDate:moment().add(b,"day"),minDate:moment().add(1,"day"),locale:{format:"YYYY-MM-DD"}})}var g=["v-pills-general-tab","v-pills-optional-tab","v-pills-optionals-tab","v-pills-usecase-tab"];if("undefined"!=typeof dynamic_page){g=["v-pills-general-tab"];for(const a of dynamic_page)g.push(`v-pills-${a}-tab`)}$(document).on("click",".tab-name",function(){var a=$(this).attr("data-id");$("#theme-title").html(a)}),$(document).on("click","button.switch-tab",function(){$("#"+$(this).attr("data-id")).tab("show");var b=$(this).attr("data-id");a(b),$(".tab-pane[aria-labelledby=\"home-tab\"").addClass("show active"),$("#"+$(this).attr("id")).addClass("active").attr("aria-selected",!0)});var h=setInterval(()=>{$("#btnGroupDrop1").length&&($("#btnGroupDrop1").css("display","none"),$(".btn-group").css({display:"inline-block"}),$("#dataTableBuilder_length").css({"margin-top":"-20px"}),clearInterval(h))},100);$(document).on("keyup",".int-number",function(){let a=$(this).val();a=a.substring(0,8),"-"==a?$(this).val("-"):a.includes("-1")?$(this).val("-1"):$(this).val(a.replace(/[^0-9]{1,8}/g,""))}),$(".package-submit-button, .package-feature-submit-button").on("click",function(){setTimeout(()=>{for(const c of g)if($("#"+c.replace("-tab","")).find(".error").length){var b=$("#"+c.replace("-tab","")).attr("aria-labelledby");$("#"+b).tab("show"),a(b);break}},100)}),$(".add-feature-nav").on("click",function(){var a=$(this).attr("data-count"),b=$("#add-feature-nav").find("li a");b.attr("id",`v-pills-${a}-tab`).attr("href",`#v-pills-${a}`).attr("aria-controls",`v-pills-${a}`).attr("data-id",jsLang("Custom")+a),b.text(jsLang("Custom")+a),$(this).attr("data-count",+a+1),$(this).before($("#add-feature-nav").html());var c=$("#add-feature-data");c.find(".tab-pane").attr("id",`v-pills-${a}`).attr("aria-labelledby",`v-pills-${a}-tab`),c.find(".type").attr("name",`meta[custom${a}][type]`),c.find(".title").attr("name",`meta[custom${a}][title]`),c.find(".description").attr("name",`meta[custom${a}][description]`),c.find(".is_visible").attr("name",`meta[custom${a}][is_visible]`).addClass("select2-dynamic"),c.find(".status").attr("name",`meta[custom${a}][status]`).addClass("select2-dynamic"),$("#topNav-v-pills-tabContent").append(c.html()),$("#add-feature-data").find(".is_visible, .status").removeClass("select2-dynamic"),$(".select2-dynamic").select2({minimumResultsForSearch:1/0})}),$(document).on("click",".custom-feature-nav .close",function(){$("#v-pills-general-tab").tab("show"),a("v-pills-general-tab");var b=$(this).siblings("a").attr("aria-controls");$(this).closest(".custom-feature-nav").remove(),$("#"+b).remove()}),$("#subscription-add-container").length&&($("input[name=\"activation_date\"]").daterangepicker(dateSingleConfig()),$("input[name=\"billing_date\"]").daterangepicker(dateSingleConfig()),$("input[name=\"next_billing_date\"]").daterangepicker({singleDatePicker:!0,showDropdowns:!0,startDate:moment().add(1,"day"),minDate:moment().add(1,"day"),locale:{format:"YYYY-MM-DD"}})),$("#subscription-edit-container").length&&($("input[name=\"activation_date\"]").daterangepicker(dateSingleConfig($("input[name=\"activation_date\"]").val())),$("input[name=\"billing_date\"]").daterangepicker(dateSingleConfig($("input[name=\"billing_date\"]").val())),$("input[name=\"next_billing_date\"]").daterangepicker(dateSingleConfig($("next_input[name=\"billing_date\"]").val()))),$("#billing_cycle").on("change",function(){var a=$(this).val();"days"==a?$("#duration_days").removeClass("d-none"):$("#duration_days").addClass("d-none")}),$(".select2#usecase-category").on("select2:select",function(a){var c=a.params.data;b(),$.ajax({url:SITE_URL+"/package/get-templates/"+c.id,type:"get",success:function(a){for(const c of a.data){var b=new Option(c.name,c.slug,!1,!0);$(".select2#usecase-template").append(b)}}})}),$(".select2#usecase-category").on("select2:unselect",function(a){var b=a.params.data;$.ajax({url:SITE_URL+"/package/get-templates/"+b.id,type:"get",success:function(a){for(const b of a.data)$(".select2#usecase-template option[value=\""+b.slug+"\"]").remove()}})}),$(document).on("click","#email_invoice",function(a){a.preventDefault(),parent=this,$(this).attr("disabled",!0).find(".feather").addClass("icon-loader"),$.ajax({url:$(parent).attr("url"),type:"get",success:function(a){let b=a.status?"alert-success":"alert-danger",c=a.status?"alert-danger":"alert-success";$(".top-notification").removeClass("d-none").find(".alert").addClass(b).removeClass(c).find(".alertText").text(a.message)},complete:function(){$(parent).removeAttr("disabled").find(".feather").removeClass("icon-loader")}})});const i={yearly:365,monthly:30,weekly:7};if($(".select2#package_id").on("select2:select",function(a){var b=a.params.data.id,g=c(b);g.done(function(a){d(a),e(a),f(a)})}),$("#subscription-add-container").length){var j=c($(".select2#package_id").val());j.done(function(a){d(a),e(a),f(a)})}$(".select2-hide-search#payment_status").on("select2:select",function(a){var b=a.params.data.text,c=$("#billing_price").val();"Paid"==b?($("#amount_received").val(c),$("#amount_due").val(0)):($("#amount_received").val(0),$("#amount_due").val(c))})});